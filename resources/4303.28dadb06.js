"use strict";(self.webpackChunkembedsocial_live=self.webpackChunkembedsocial_live||[]).push([[4303],{4303:(e,i,t)=>{t.r(i),t.d(i,{default:()=>f});t(3792),t(2953);var a=t(641),d=t(33),r=t(3751),n={key:1,class:"es-highlighted-media"},l={key:2,class:"es-product-card-wrapper"};t(3362);var s=t(3889),o=t(3567),g=t(4720),u=t(9886),c=t(1833),h=t(274),p=t(6210),m=t(2604),w=t(2303),y=t(9097),v=t(6681);s.A.use([o.Vx,o.dK,o.Ij,o.xA,o.s3]);var b={name:"LayoutSlider",components:{Swiper:g.RC,SwiperSlide:g.qr,ClassicCard:m.A,ModernCard:w.A,MediaCard:y.A,ProductCardsSliderContainer:v.A,AiSummaryCard:(0,a.$V)((()=>t.e(7705).then(t.bind(t,7705)))),NavigationArrow:(0,a.$V)((()=>t.e(5358).then(t.bind(t,5358))))},mixins:[p.A],props:{widgetSettings:{type:Object,required:!0,description:"All of the settings for the widget"},widgetMedia:{type:Array,required:!0,description:"Media data which will be displayed in the widget"},widgetData:{type:Object,required:!0,description:"Context for the widget ex. name, layout, sources, theme, template"},filters:{type:Object,default:()=>({})},postsPerPage:{type:Number,default:15},shouldEnableDefaultReviewerAvatar:{type:Boolean,required:!0},numMaxMedia:{type:Number,default:0},aiGeneratedSummary:{type:[String,null],default:null},enableOpenAIIntegration:{type:Boolean,required:!1},inUniversalEditor:{type:Boolean,default:!1},enableCardClickEvent:{type:Boolean,default:!1},enableAnalytics:{type:Boolean,default:!1},embeddedBaseUrl:{type:String,default:""}},emits:["open-lightbox","card-keyup","layout-mounted","card-click"],data:()=>({swiperInstance:null,slideTransitionStarted:!1,videoIsPlaying:!1,isTemplatePreview:(0,c.Bn)(),swiperOptions:{initialSlide:0,preloadImages:!1,navigation:{nextEl:".swiper-next",prevEl:".swiper-prev"},keyboard:{enabled:!0,onlyInViewport:!0}},currentlyHighlightedMedia:null}),computed:{formattedMedia(){return this.showAiSummaryCard?[{name:"ai-summary-card"},...this.widgetMedia]:this.widgetMedia},highlightedMediaWidth(){var e=100/(+this.widgetSettings.columns+2);return"Dynamic"===this.widgetSettings.columns?"50%":"".concat(2*e,"%")},widgetCardType(){return(0,u.c8)(this.widgetSettings.cardType)},computedContainerPadding(){return"modern"===this.widgetSettings.cardType&&"top"!==this.widgetSettings.selectedImagePosition?"22px 0 10px 0":"10px 0"},profilePhotoUrls(){return this.widgetMedia.map((e=>e.profilePhotoUrl)).filter((e=>e))},computedNavArrowsCss(){return"Dark"===this.widgetSettings.widgetTheme?"#000000":"#ffffff"},breakpointsForWidget(){return"Dynamic"!==this.widgetSettings.columns?{0:{slidesPerView:this.widgetSettings.columnsOnMobile,grid:this.numberOfWidgerRows("mobile")},768:{slidesPerView:this.widgetSettings.columns,grid:this.numberOfWidgerRows("desktop")}}:{0:{slidesPerView:this.widgetSettings.columnsOnMobile,grid:this.numberOfWidgerRows("mobile")},768:{slidesPerView:2,grid:this.numberOfWidgerRows("desktop")},900:{slidesPerView:3,grid:this.numberOfWidgerRows("desktop")},1440:{slidesPerView:4,grid:this.numberOfWidgerRows("desktop")},1920:{slidesPerView:5,grid:this.numberOfWidgerRows("desktop")}}},breakpointsForTemplateWidget(){return{0:{slidesPerView:this.widgetSettings.columnsOnMobile,grid:this.numberOfWidgerRows("mobile")},420:{slidesPerView:isNaN(this.widgetSettings.columns)?3:this.widgetSettings.columns,grid:this.numberOfWidgerRows("desktop")}}},breakpoints(){return this.isTemplatePreview?this.breakpointsForTemplateWidget:this.breakpointsForWidget},equalCardHeightCss(){return this.widgetSettings.equalCardHeight?{stretchHeight:"stretch",slideHeight:"unset"}:{stretchHeight:"unset",slideHeight:"100%"}},customAutoplay(){var e=this.widgetSettings.autoplaySpan||0;return!!e&&{delay:e,disableOnInteraction:!1,pauseOnMouseEnter:!0}},uniqueSliderKey(){var{orderByDate:e,postType:i,filterKeyword:t,showPostsAfterDateButton:a,showPostsAfterDate:d}=this.filters,r=a?1:0,n=d?new Date(d).getTime():0;return Math.random()*((this.customAutoplay?this.customAutoplay.delay:0)+this.widgetSettings.columnsOnMobile+this.widgetSettings.cardSpacing+this.widgetSettings.navigationArrows+this.widgetSettings.widgetRows+this.postsPerPage+e.length+i.length+t.length+r+n)},computedDesktopWidgetRows(){return 1===this.widgetSettings.widgetRows?{}:{rows:this.widgetSettings.widgetRows,fill:"row"}},computedMobileWidgetRows(){return 1===this.widgetSettings.widgetRowsOnMobile?{}:{rows:this.widgetSettings.widgetRowsOnMobile,fill:"row"}},sliderContainerClasses(){var e=[];return this.enableHighlightMedia&&e.push("es-highlighted-media-container"),e},enableInfiniteSlider(){return this.widgetSettings.infiniteSlider&&1===this.widgetSettings.widgetRowsOnMobile&&1===this.widgetSettings.widgetRows&&!this.enableHighlightMedia},productHighlightedCardSliderHeading(){var e,i,t=null!==(e=null===(i=this.currentlyHighlightedMedia.productTags)||void 0===i?void 0:i.length)&&void 0!==e?e:"0";return"".concat(this.$wt("w_products")," (").concat(t,")")}},mounted(){this.inUniversalEditor&&this.$emit("layout-mounted","slider"),this.currentlyHighlightedMedia=this.widgetMedia[this.widgetMedia.length-1]},methods:{changeVideoIsPlaying(e){this.videoIsPlaying=e,this.videoIsPlaying?this.pauseAutoplay():this.resumeAutoplay()},pauseAutoplay(){var e,i;null===(e=this.swiperInstance)||void 0===e||null===(i=e.autoplay)||void 0===i||i.stop()},resumeAutoplay(){var e,i;null===(e=this.swiperInstance)||void 0===e||null===(i=e.autoplay)||void 0===i||i.start()},onSwiperInstance(e){this.swiperInstance=e},handleTextToggleClick(e){e?this.pauseAutoplay():this.resumeAutoplay()},numberOfWidgerRows(e){return"mobile"===e?this.computedMobileWidgetRows:this.computedDesktopWidgetRows},setSlideTransition(e){this.enableHighlightMedia&&this.updateHighlightedMedia(),this.slideTransitionStarted="start"===e},mediaIndex(e){return this.showAiSummaryCard?e-1:e},handleNextSlideKeydown(e){e.preventDefault(),this.swiperInstance.slideNext()},handlePrevSlideKeydown(e){e.preventDefault(),this.swiperInstance.slidePrev()},updateHighlightedMedia(){var e=this.swiperInstance.previousIndex,i=document.getElementsByClassName("swiper-slide")[e];this.currentlyHighlightedMedia=this.widgetMedia.find((e=>+e.id==+(null==i?void 0:i.dataset.mediaId)))},getCurrentlyHighlightedMediaIndex(){return this.formattedMedia.findIndex((e=>e.id===this.currentlyHighlightedMedia.id))},handleCardClick(e){window.open(e,"_blank")},productCardSliderHeading(e){return"".concat(this.$wt("w_products")," (").concat(e.productTags.length,")")},mediaDate:h.B$,isMediaVerified:h.tx}},k=()=>{(0,r.$9)((e=>({"211ab763":e.computedContainerPadding,b4394f48:e.equalCardHeightCss.stretchHeight,"1d9db208":e.equalCardHeightCss.slideHeight,"0bcb3ac9":e.computedNavArrowsCss,"38d84e62":e.highlightedMediaWidth})))},S=b.setup;b.setup=S?(e,i)=>(k(),S(e,i)):k;const C=b;const f=(0,t(6262).A)(C,[["render",function(e,i,t,s,o,g){var u,c,h,p,m=(0,a.g2)("navigation-arrow"),w=(0,a.g2)("product-cards-slider-container"),y=(0,a.g2)("ai-summary-card"),v=(0,a.g2)("swiper-slide"),b=(0,a.g2)("swiper");return(0,a.uX)(),(0,a.CE)("div",{id:"es-swiper-container",ref:"sliderLayout",class:(0,d.C4)(["es-swiper-container",g.sliderContainerClasses])},[t.widgetSettings.navigationArrows&&g.formattedMedia.length>1?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.Lk)("div",{class:(0,d.C4)(["swiper-button swiper-button-right swiper-next",{"es-dark-arrow":"Dark"===t.widgetSettings.widgetTheme}]),tabindex:"0",role:"button","aria-label":"Next slide",onKeydown:i[0]||(i[0]=(0,r.jR)((function(){return g.handleNextSlideKeydown&&g.handleNextSlideKeydown(...arguments)}),["enter"]))},[(0,a.bF)(m)],34),(0,a.Lk)("div",{class:(0,d.C4)(["swiper-button swiper-button-left swiper-prev",{"es-dark-arrow":"Dark"===t.widgetSettings.widgetTheme}]),tabindex:"0",role:"button","aria-label":"Previous slide",onKeydown:i[1]||(i[1]=(0,r.jR)((function(){return g.handlePrevSlideKeydown&&g.handlePrevSlideKeydown(...arguments)}),["enter"]))},[(0,a.bF)(m)],34)],64)):(0,a.Q3)("v-if",!0),e.enableHighlightMedia&&null!==o.currentlyHighlightedMedia?((0,a.uX)(),(0,a.CE)("div",n,[((0,a.uX)(),(0,a.Wv)((0,a.$y)(g.widgetCardType),(0,a.v6)({id:o.currentlyHighlightedMedia.id,"source-type":o.currentlyHighlightedMedia.sourceType,"avatar-img-source":o.currentlyHighlightedMedia.profilePhotoUrl,username:o.currentlyHighlightedMedia.authorName,"formatted-date":g.mediaDate({media:o.currentlyHighlightedMedia,widgetSettings:t.widgetSettings}),text:o.currentlyHighlightedMedia.formattedCaption||o.currentlyHighlightedMedia.caption,"media-image":o.currentlyHighlightedMedia.image,"media-large-image":o.currentlyHighlightedMedia.largeImage,"enable-large-images":t.widgetSettings.enableHighQuialityImages,"img-length":o.currentlyHighlightedMedia.carousel.length||1,"average-rating":o.currentlyHighlightedMedia.rating,"media-link":o.currentlyHighlightedMedia.mediaLink,"source-link":o.currentlyHighlightedMedia.sourceLink,"media-type":o.currentlyHighlightedMedia.type,"media-cta":o.currentlyHighlightedMedia.cta,"media-source-logo":o.currentlyHighlightedMedia.sourceCoverPhoto,"global-cta-disabled":o.currentlyHighlightedMedia.globalCtaDisabled,"product-tags":o.currentlyHighlightedMedia.productTags,"enable-card-click-event":t.enableCardClickEvent,"layout-type":"slider","media-video-source":o.currentlyHighlightedMedia.video.source,title:o.currentlyHighlightedMedia.title,"ai-title":o.currentlyHighlightedMedia.aiTitle,"post-click-event-id":o.currentlyHighlightedMedia.postClickEventId,"click-lightbox-event-id":o.currentlyHighlightedMedia.clickLightboxEventId,"call-to-action-click-event-id":o.currentlyHighlightedMedia.callToActionClickEventId,"is-verified":g.isMediaVerified(o.currentlyHighlightedMedia.sourceSearchId,t.widgetData.sources),"should-enable-default-reviewer-avatar":t.shouldEnableDefaultReviewerAvatar,"slide-transition-started":o.slideTransitionStarted,"ai-generated-summary":t.aiGeneratedSummary,"enable-analytics":t.enableAnalytics,"embedded-base-url":t.embeddedBaseUrl,"source-location":o.currentlyHighlightedMedia.sourceLocation||"","pin-status":o.currentlyHighlightedMedia.pinStatus,priority:o.currentlyHighlightedMedia.priority,"media-video":(null===(u=e.media)||void 0===u?void 0:u.video)||null},t.widgetSettings,{onOpenLightbox:i[2]||(i[2]=i=>e.$emit("open-lightbox",i,g.getCurrentlyHighlightedMediaIndex())),onCardKeyup:i[3]||(i[3]=i=>e.$emit("card-keyup",i,g.getCurrentlyHighlightedMediaIndex(),o.currentlyHighlightedMedia.mediaLink)),onCardClick:i[4]||(i[4]=i=>e.$emit("card-click",i,g.getCurrentlyHighlightedMediaIndex())),onVideoIsPlaying:i[5]||(i[5]=e=>g.changeVideoIsPlaying(!0)),onVideoIsPaused:i[6]||(i[6]=e=>g.changeVideoIsPlaying(!1)),onTextToggleClick:g.handleTextToggleClick}),null,16,["id","source-type","avatar-img-source","username","formatted-date","text","media-image","media-large-image","enable-large-images","img-length","average-rating","media-link","source-link","media-type","media-cta","media-source-logo","global-cta-disabled","product-tags","enable-card-click-event","media-video-source","title","ai-title","post-click-event-id","click-lightbox-event-id","call-to-action-click-event-id","is-verified","should-enable-default-reviewer-avatar","slide-transition-started","ai-generated-summary","enable-analytics","embedded-base-url","source-location","pin-status","priority","media-video","onTextToggleClick"])),null!==(c=o.currentlyHighlightedMedia.productTags)&&void 0!==c&&c.length?((0,a.uX)(),(0,a.Wv)(w,{key:0,"card-type":null!==(h=t.widgetSettings.productCardStyle)&&void 0!==h?h:"classic",products:e.formattedProductTagsForMedia(null!==(p=o.currentlyHighlightedMedia.productTags)&&void 0!==p?p:[],e.$wt),heading:g.productHighlightedCardSliderHeading,onButtonClick:e.handleProductCardClick},null,8,["card-type","products","heading","onButtonClick"])):(0,a.Q3)("v-if",!0)])):(0,a.Q3)("v-if",!0),((0,a.uX)(),(0,a.Wv)(b,{ref:"mainSwiper",key:g.uniqueSliderKey,autoplay:g.customAutoplay,breakpoints:g.breakpoints,"slides-per-view":o.swiperOptions.slidesPerView,"preload-images":o.swiperOptions.preloadImages,navigation:o.swiperOptions.navigation,"space-between":t.widgetSettings.cardSpacing,loop:g.enableInfiniteSlider,keyboard:o.swiperOptions.keyboard,onSwiper:g.onSwiperInstance,onSlideChangeTransitionStart:i[9]||(i[9]=e=>g.setSlideTransition("start")),onSlideChangeTransitionEnd:i[10]||(i[10]=e=>g.setSlideTransition("end"))},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.formattedMedia,((r,n)=>((0,a.uX)(),(0,a.Wv)(v,{key:n,"data-media-id":r.id,class:(0,d.C4)({"es-swiper-grid":t.widgetSettings.widgetRows>1})},{default:(0,a.k6)((()=>{var d;return["ai-summary-card"===r.name&&e.showAiSummaryCard?((0,a.uX)(),(0,a.Wv)(y,(0,a.v6)({key:0,"profile-photo-urls":g.profilePhotoUrls,"num-max-media":t.numMaxMedia,"ai-generated-summary":t.aiGeneratedSummary,"slide-transition-started":o.slideTransitionStarted,ref_for:!0},t.widgetSettings),null,16,["profile-photo-urls","num-max-media","ai-generated-summary","slide-transition-started"])):((0,a.uX)(),(0,a.Wv)((0,a.$y)(g.widgetCardType),(0,a.v6)({key:1,id:r.id,index:g.mediaIndex(n),"source-type":r.sourceType,"avatar-img-source":r.profilePhotoUrl,username:r.authorName,"formatted-date":g.mediaDate({media:r,widgetSettings:t.widgetSettings}),text:r.formattedCaption||r.caption,"media-image":r.image,"media-large-image":r.largeImage,"enable-large-images":t.widgetSettings.enableHighQuialityImages,"img-length":r.carousel.length||1,"average-rating":r.rating,"media-link":r.mediaLink,"source-link":r.sourceLink,"media-type":r.type,"media-cta":r.cta,"media-source-logo":r.sourceCoverPhoto,"global-cta-disabled":r.globalCtaDisabled,"product-tags":r.productTags,"enable-card-click-event":t.enableCardClickEvent,"layout-type":"slider","media-video":(null==r?void 0:r.video)||null,"media-video-source":r.video.source,title:r.title,"ai-title":r.aiTitle,"post-click-event-id":r.postClickEventId,"click-lightbox-event-id":r.clickLightboxEventId,"call-to-action-click-event-id":r.callToActionClickEventId,"is-verified":g.isMediaVerified(r.sourceSearchId,t.widgetData.sources),"should-enable-default-reviewer-avatar":t.shouldEnableDefaultReviewerAvatar,"slide-transition-started":o.slideTransitionStarted,"ai-generated-summary":t.aiGeneratedSummary,"enable-analytics":t.enableAnalytics,"embedded-base-url":t.embeddedBaseUrl,"source-location":r.sourceLocation||"","pin-status":r.pinStatus,priority:r.priority,ref_for:!0},t.widgetSettings,{onOpenLightbox:i=>e.$emit("open-lightbox",i,g.mediaIndex(n)),onCardKeyup:i=>e.$emit("card-keyup",i,g.mediaIndex(n),r.mediaLink),onCardClick:i=>e.$emit("card-click",i,g.mediaIndex(n)),onVideoIsPlaying:i[7]||(i[7]=e=>g.changeVideoIsPlaying(!0)),onVideoIsPaused:i[8]||(i[8]=e=>g.changeVideoIsPlaying(!1)),onTextToggleClick:g.handleTextToggleClick}),null,16,["id","index","source-type","avatar-img-source","username","formatted-date","text","media-image","media-large-image","enable-large-images","img-length","average-rating","media-link","source-link","media-type","media-cta","media-source-logo","global-cta-disabled","product-tags","enable-card-click-event","media-video","media-video-source","title","ai-title","post-click-event-id","click-lightbox-event-id","call-to-action-click-event-id","is-verified","should-enable-default-reviewer-avatar","slide-transition-started","ai-generated-summary","enable-analytics","embedded-base-url","source-location","pin-status","priority","onOpenLightbox","onCardKeyup","onCardClick","onTextToggleClick"])),e.enableProductCards?((0,a.uX)(),(0,a.CE)("div",l,[r.productTags.length?((0,a.uX)(),(0,a.Wv)(w,{key:0,"card-type":null!==(d=t.widgetSettings.productCardStyle)&&void 0!==d?d:"classic",products:e.formattedProductTagsForMedia(r.productTags,e.$wt),heading:g.productCardSliderHeading(r),onButtonClick:e.handleProductCardClick},null,8,["card-type","products","heading","onButtonClick"])):(0,a.RG)(e.$slots,"add-new-product",{key:1,chosenMedia:r})])):(0,a.Q3)("v-if",!0)]})),_:2},1032,["data-media-id","class"])))),128))])),_:3},8,["autoplay","breakpoints","slides-per-view","preload-images","navigation","space-between","loop","keyboard","onSwiper"]))],2)}]])}}]);